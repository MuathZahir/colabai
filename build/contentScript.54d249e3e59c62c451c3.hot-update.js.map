{"version":3,"file":"contentScript.54d249e3e59c62c451c3.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzOA","sources":["webpack://chrome-extension-boilerplate-react/./src/pages/Content/App.tsx","webpack://chrome-extension-boilerplate-react/webpack/runtime/getFullHash"],"sourcesContent":["var _a;\r\nvar _b;\r\n_b = $RefreshSig$();\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { parseContent } from './parser';\r\nimport '../../styles.css';\r\nimport { UserCircle } from 'lucide-react';\r\nvar _c = [200, 500, 350], minWidth = _c[0], maxWidth = _c[1], defaultWidth = _c[2];\r\nvar messages = [\r\n    {\r\n        type: 'user',\r\n        content: 'Can you help me understand how to implement a binary search tree?'\r\n    },\r\n    {\r\n        type: 'ai',\r\n        content: 'Of course! A binary search tree is a data structure where each node has at most two children, with all left descendants being less than the current node, and all right descendants being greater. Would you like me to explain the implementation details?'\r\n    }\r\n];\r\nvar App = function () {\r\n    _b();\r\n    var _c = useState(defaultWidth), width = _c[0], setWidth = _c[1];\r\n    var isResized = useRef(false);\r\n    var overlay = useRef(null);\r\n    useEffect(function () {\r\n        overlay.current = document.createElement('div');\r\n        overlay.current.style.position = 'fixed';\r\n        overlay.current.style.top = '0';\r\n        overlay.current.style.left = '0';\r\n        overlay.current.style.width = '100%';\r\n        overlay.current.style.height = '100%';\r\n        overlay.current.style.cursor = 'col-resize';\r\n        overlay.current.style.zIndex = '9999';\r\n        overlay.current.style.backgroundColor = 'transparent';\r\n        overlay.current.style.display = 'none';\r\n        document.body.appendChild(overlay.current);\r\n        overlay.current.addEventListener(\"mousemove\", function (e) {\r\n            if (!isResized.current) {\r\n                return;\r\n            }\r\n            setWidth(function (previousWidth) {\r\n                var newWidth = window.innerWidth - e.pageX;\r\n                var isWidthInRange = newWidth >= minWidth && newWidth <= maxWidth;\r\n                return isWidthInRange ? newWidth : previousWidth;\r\n            });\r\n            e.preventDefault();\r\n            pauseEvent(e);\r\n        });\r\n        overlay.current.addEventListener(\"mouseup\", function () {\r\n            isResized.current = false;\r\n            if (overlay.current)\r\n                overlay.current.style.display = 'none';\r\n        });\r\n        function pauseEvent(e) {\r\n            if (e.stopPropagation)\r\n                e.stopPropagation();\r\n            if (e.preventDefault)\r\n                e.preventDefault();\r\n            e.cancelBubble = true;\r\n            e.returnValue = false;\r\n            return false;\r\n        }\r\n    }, []);\r\n    useEffect(function () {\r\n        // Inject the page script\r\n        var script = document.createElement('script');\r\n        script.src = chrome.runtime.getURL('pageScript.js');\r\n        document.body.appendChild(script);\r\n        chrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\r\n            if (request.action === \"contentScriptReady\") {\r\n                sendResponse({ ready: true });\r\n            }\r\n            else if (request.action === \"applyOperations\") {\r\n                applyOperations(request.content);\r\n                sendResponse({ success: true });\r\n            }\r\n            else if (request.action === \"getContent\") {\r\n                requestContent(function (content) {\r\n                    sendResponse({ success: true, data: content });\r\n                });\r\n            }\r\n            return true; // Indicates we will send a response asynchronously\r\n        });\r\n    }, []);\r\n    return (React.createElement(React.Fragment, null,\r\n        React.createElement(\"div\", { className: \"w-2 cursor-col-resize\", onMouseDown: function () {\r\n                isResized.current = true;\r\n                if (overlay.current) {\r\n                    overlay.current.style.display = 'block';\r\n                }\r\n            } }),\r\n        React.createElement(\"div\", { className: \"p-4 space-y-4 shadow-xl bg-gray-900 text-gray-100 flex flex-col justify-between\", style: { width: \"\".concat(width / 16, \"rem\") } },\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"div\", { className: \"flex items-center space-x-2 mb-6\" },\r\n                    React.createElement(\"div\", { className: \"bg-gray-800 p-2 rounded-lg\" },\r\n                        React.createElement(\"svg\", { className: \"w-5 h-5 text-orange-600\", fill: \"none\", stroke: \"currentColor\", viewBox: \"0 0 24 24\", xmlns: \"http://www.w3.org/2000/svg\" },\r\n                            React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: \"2\", d: \"M13 10V3L4 14h7v7l9-11h-7z\" }))),\r\n                    React.createElement(\"h1\", { className: \"text-lg font-semibold text-white\" }, \" Colab AI Assistant \")),\r\n                React.createElement(\"div\", { className: \"space-y-4 mb-4 max-h-96 overflow-y-auto\" }, messages.map(function (message, index) { return (React.createElement(\"div\", { key: index, className: \"flex \".concat(message.type === 'user' ? 'justify-end' : 'justify-start') },\r\n                    React.createElement(\"div\", { className: \"flex gap-2 max-w-[85%] \".concat(message.type === 'user' ? 'flex-row-reverse' : 'flex-row') },\r\n                        React.createElement(\"div\", { className: \"flex-shrink-0 \".concat(message.type === 'ai' ? 'bg-orange-600' : 'bg-gray-600', \" rounded-full p-2 h-8 w-8 flex items-center justify-center\") }, message.type === 'ai' ? (React.createElement(\"svg\", { className: \"w-4 h-4 text-white\", fill: \"none\", stroke: \"currentColor\", viewBox: \"0 0 24 24\" },\r\n                            React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: \"2\", d: \"M13 10V3L4 14h7v7l9-11h-7z\" }))) : (React.createElement(UserCircle, { className: \"w-4 h-4 text-white\" }))),\r\n                        React.createElement(\"div\", { className: \"p-3 rounded-lg \".concat(message.type === 'user'\r\n                                ? 'bg-orange-600 text-white'\r\n                                : 'bg-gray-800 text-gray-100') },\r\n                            React.createElement(\"p\", { className: \"text-sm\" }, message.content))))); }))),\r\n            React.createElement(\"div\", { className: \"space-y-4\" },\r\n                React.createElement(\"div\", { className: \"space-y-2\" },\r\n                    React.createElement(\"textarea\", { id: \"prompt\", placeholder: \"Enter your prompt here...\", className: \"w-full h-32 px-3 py-2 text-sm text-gray-100 border border-gray-700 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors resize-none bg-gray-800\" })),\r\n                React.createElement(\"div\", { className: \"space-y-2\" },\r\n                    React.createElement(\"select\", { id: \"model\", className: \"w-full px-3 py-2 text-sm text-gray-100 border border-gray-700 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 bg-gray-800 cursor-pointer\" },\r\n                        React.createElement(\"option\", { value: \"gpt-4o-mini\" }, \"GPT-4o Mini\"))),\r\n                React.createElement(\"div\", { className: \"flex space-x-2\" },\r\n                    React.createElement(\"button\", { className: \"flex-1 px-4 py-2 text-sm font-medium text-white bg-orange-600 rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-colors flex items-center justify-center gap-2\" },\r\n                        React.createElement(\"svg\", { className: \"w-5 h-5 text-white\", fill: \"none\", stroke: \"currentColor\", viewBox: \"0 0 24 24\" },\r\n                            React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: \"2\", d: \"M9 5l7 7-7 7\" })),\r\n                        \"Send\"))))));\r\n};\r\n_a = App;\r\n$RefreshReg$(_a, \"App\");\r\n_b(App, \"rF80BMBPURuDujSIsEuF77sIoUo=\");\r\nfunction applyOperations(content) {\r\n    var operations = parseContent(content);\r\n    var _loop_1 = function (i) {\r\n        setTimeout(function () {\r\n            var operation = operations[i];\r\n            if (operation.type === 'create') {\r\n                insertCell(operation.content, operation.cellType, operation.position);\r\n            }\r\n            else if (operation.type === 'edit') {\r\n                updateCell(operation.cellId, operation.content);\r\n            }\r\n            else if (operation.type === 'delete') {\r\n                deleteCell(operation.cellId);\r\n            }\r\n            else {\r\n                console.error('Invalid operation type');\r\n            }\r\n        }, 1000 * i); // Delay to allow for cell creation\r\n    };\r\n    for (var i = 0; i < operations.length; i++) {\r\n        _loop_1(i);\r\n    }\r\n}\r\nfunction insertCell(content, type, position) {\r\n    var atIndex = getCellIndexFromRelativePosition(position);\r\n    if (atIndex === -1) {\r\n        console.error('Invalid position');\r\n        return;\r\n    }\r\n    var notebook = document.querySelector('colab-shaded-scroller');\r\n    if (!notebook) {\r\n        console.error('Notebook element not found');\r\n        return;\r\n    }\r\n    var lastCell = notebook.querySelector(\".notebook-cell-list > :nth-child(\".concat(atIndex, \")\"));\r\n    if (!lastCell) {\r\n        console.error('Cell not found');\r\n        return;\r\n    }\r\n    var addButtonGroup = atIndex === 0 ? notebook.querySelector('.add-cell') : lastCell.querySelector('.add-cell');\r\n    if (!addButtonGroup) {\r\n        console.error('Add button group not found');\r\n        return;\r\n    }\r\n    var event = new MouseEvent('mouseenter', {\r\n        'view': window,\r\n        'bubbles': true,\r\n        'cancelable': true\r\n    });\r\n    addButtonGroup.dispatchEvent(event); // Hover over the add cell button to make the buttons visible\r\n    var addButton = addButtonGroup.querySelector(type === 'code' ? '.add-code' : '.add-text');\r\n    addButton.click();\r\n    // get the newly created cell\r\n    var newCell = notebook.querySelector('.notebook-cell-list > :nth-child(' + (atIndex + 1) + ')');\r\n    if (!newCell) {\r\n        console.error('New cell not found');\r\n        return;\r\n    }\r\n    var id = newCell.getAttribute('id');\r\n    // Use a custom event to pass data to the page context\r\n    setTimeout(function () {\r\n        var customEvent = new CustomEvent('setMonacoValue', {\r\n            detail: { id: id, content: content, type: type }\r\n        });\r\n        document.dispatchEvent(customEvent);\r\n    }, 500); // Increased timeout to allow for cell creation\r\n}\r\nfunction updateCell(id, newContent) {\r\n    var customEvent = new CustomEvent('setMonacoValue', {\r\n        detail: { id: id, content: newContent }\r\n    });\r\n    document.dispatchEvent(customEvent);\r\n}\r\nfunction deleteCell(id) {\r\n    var customEvent = new CustomEvent('deleteCell', { detail: { id: id } });\r\n    document.dispatchEvent(customEvent);\r\n}\r\nfunction requestContent(callback) {\r\n    function handleContentEvent(event) {\r\n        document.removeEventListener('contentValue', handleContentEvent);\r\n        callback(event.detail.content);\r\n    }\r\n    document.addEventListener('contentValue', handleContentEvent);\r\n    var customEvent = new CustomEvent('getContent');\r\n    document.dispatchEvent(customEvent);\r\n}\r\nfunction getCellIndexFromRelativePosition(position) {\r\n    var notebook = document.querySelector('colab-shaded-scroller');\r\n    if (!notebook) {\r\n        console.error('Notebook element not found');\r\n        return -1;\r\n    }\r\n    var cells = notebook.querySelectorAll('.cell');\r\n    if (position === 'top') {\r\n        return 0;\r\n    }\r\n    else if (position === 'bottom') {\r\n        return cells.length;\r\n    }\r\n    else if (position.startsWith('after:')) {\r\n        var id_1 = position.split(':')[1];\r\n        var index = Array.from(cells).findIndex(function (cell) { return cell.getAttribute('id') === id_1; });\r\n        return index + 1;\r\n    }\r\n    else if (position.startsWith('before:')) {\r\n        var id_2 = position.split(':')[1];\r\n        var index = Array.from(cells).findIndex(function (cell) { return cell.getAttribute('id') === id_2; });\r\n        return index;\r\n    }\r\n    else {\r\n        return -1;\r\n    }\r\n}\r\nexport default App;\r\n","__webpack_require__.h = () => (\"5b3dc5fc52c76a908342\")"],"names":[],"sourceRoot":""}